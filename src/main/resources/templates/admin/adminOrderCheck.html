<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="~{comlayout/base :: meta}"></div>
    <div th:replace="~{comlayout/base :: styles}"></div>
    <link rel="stylesheet" th:href="@{/css/admin-order.css}">
    <title>注文完了確認 | 寿司処リカレント</title>
</head>
<body>
    <div class="wrapper">
        <div class="inner">
            <div th:replace="~{comlayout/base :: header}"></div>

            <main>
                <div class="admin-form-wrap">
                    <h1>注文状態の更新確認</h1>
                    <p class="confirm-message">以下の注文を「完了」状態に更新します。よろしいですか？</p>

                    <table class="admin-table">
                        <head>
                            <tr>
                                <th>注文日時</th>
                                <th>ユーザー情報</th>
                                <th>注文番号</th>
                                <th>注文内容</th>
                                <th>合計金額</th>
                            </tr>
                        </head>
                        <body>
                            <tr th:each="order : ${orderCheckList}">
                                <td th:text="${#temporals.format(order.orderDatetime, 'yyyy/MM/dd HH:mm')}"></td>
                                <td>
                                    ID: <span th:text="${order.user.id}"></span><br>
                                    <span th:text="${order.shippingRecipientName}"></span> 様
                                </td>
                                <td th:text="${order.orderNumber}"></td>
                                <td>
                                    <span th:each="item, iterStat : ${order.items}">
                                        <span th:text="${item.productName} + '×' + ${item.quantity}"></span>
                                        <span th:if="${!iterStat.last}">、</span>
                                    </span>
                                </td>
                                <td th:text="${#numbers.formatInteger(order.totalAmount, 1, 'COMMA')} + '円'"></td>
                            </tr>
                        </body>
                    </table>

                    <form th:action="@{/admin/completeOrder}" method="post">
                        <div class="form-actions">
                            <button type="submit" class="btn-submit">この内容で確定する</button>
                            <a class="btn-cancel" th:href="@{/admin/orderManagement}">修正する（戻る）</a>
                        </div>
                    </form>
                </div>
            </main>

            <div th:replace="~{comlayout/base :: footer}"></div>
        </div>
    </div>
</body>
</html>